<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 700">
  <defs>
    <marker id="arrowgreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#27AE60"/>
    </marker>
    <marker id="arrowred" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#E74C3C"/>
    </marker>
  </defs>
  
  <text x="450" y="30" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="#333">Movie Recommendation System - Data Flow and Interaction</text>
  
  <text x="150" y="70" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#27AE60">Success Path</text>
  
  <rect x="50" y="90" width="120" height="50" fill="#ECF0F1" stroke="#95A5A6" stroke-width="2" rx="5"/>
  <text x="110" y="115" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#34495E">movies.txt</text>
  <text x="110" y="130" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#7F8C8D">(Input)</text>
  
  <rect x="50" y="160" width="120" height="50" fill="#ECF0F1" stroke="#95A5A6" stroke-width="2" rx="5"/>
  <text x="110" y="185" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#34495E">users.txt</text>
  <text x="110" y="200" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#7F8C8D">(Input)</text>
  
  <rect x="220" y="100" width="160" height="100" fill="#3498DB" stroke="#2980B9" stroke-width="2" rx="5"/>
  <text x="300" y="130" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Parse and Validate</text>
  <text x="300" y="150" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">MovieParser</text>
  <text x="300" y="168" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">UserParser</text>
  <text x="300" y="186" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">+ Validators</text>
  
  <line x1="170" y1="115" x2="220" y2="130" stroke="#27AE60" stroke-width="2" marker-end="url(#arrowgreen)"/>
  <line x1="170" y1="185" x2="220" y2="170" stroke="#27AE60" stroke-width="2" marker-end="url(#arrowgreen)"/>
  
  <rect x="430" y="90" width="130" height="50" fill="#E74C3C" stroke="#C0392B" stroke-width="2" rx="5"/>
  <text x="495" y="115" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="white">Movie Objects</text>
  <text x="495" y="130" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">List&lt;Movie&gt;</text>
  
  <rect x="430" y="160" width="130" height="50" fill="#E74C3C" stroke="#C0392B" stroke-width="2" rx="5"/>
  <text x="495" y="185" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="white">User Objects</text>
  <text x="495" y="200" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">List&lt;User&gt;</text>
  
  <line x1="380" y1="130" x2="430" y2="115" stroke="#27AE60" stroke-width="2" marker-end="url(#arrowgreen)"/>
  <line x1="380" y1="170" x2="430" y2="185" stroke="#27AE60" stroke-width="2" marker-end="url(#arrowgreen)"/>
  
  <rect x="610" y="100" width="190" height="100" fill="#1ABC9C" stroke="#16A085" stroke-width="2" rx="5"/>
  <text x="705" y="130" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Recommendation</text>
  <text x="705" y="150" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Service</text>
  <text x="705" y="175" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">Match genres</text>
  <text x="705" y="190" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">Generate results</text>
  
  <line x1="560" y1="115" x2="610" y2="130" stroke="#27AE60" stroke-width="2" marker-end="url(#arrowgreen)"/>
  <line x1="560" y1="185" x2="610" y2="170" stroke="#27AE60" stroke-width="2" marker-end="url(#arrowgreen)"/>
  
  <rect x="610" y="240" width="190" height="60" fill="#ECF0F1" stroke="#95A5A6" stroke-width="2" rx="5"/>
  <text x="705" y="265" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#34495E">recommendations.txt</text>
  <text x="705" y="285" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#7F8C8D">(Output - Success)</text>
  
  <line x1="705" y1="200" x2="705" y2="240" stroke="#27AE60" stroke-width="2" marker-end="url(#arrowgreen)"/>
  
  <text x="150" y="370" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#E74C3C">Error Path</text>
  
  <rect x="50" y="390" width="120" height="50" fill="#ECF0F1" stroke="#95A5A6" stroke-width="2" rx="5"/>
  <text x="110" y="415" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#34495E">movies.txt</text>
  <text x="110" y="430" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#7F8C8D">(Invalid data)</text>
  
  <rect x="50" y="460" width="120" height="50" fill="#ECF0F1" stroke="#95A5A6" stroke-width="2" rx="5"/>
  <text x="110" y="485" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#34495E">users.txt</text>
  <text x="110" y="500" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#7F8C8D">(Invalid data)</text>
  
  <rect x="220" y="400" width="160" height="100" fill="#3498DB" stroke="#2980B9" stroke-width="2" rx="5"/>
  <text x="300" y="430" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Parse and Validate</text>
  <text x="300" y="455" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">Detects error</text>
  <text x="300" y="475" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">(First error only)</text>
  
  <line x1="170" y1="415" x2="220" y2="430" stroke="#E74C3C" stroke-width="2" marker-end="url(#arrowred)"/>
  <line x1="170" y1="485" x2="220" y2="470" stroke="#E74C3C" stroke-width="2" marker-end="url(#arrowred)"/>
  
  <rect x="430" y="410" width="150" height="70" fill="#E67E22" stroke="#CA6F1E" stroke-width="2" rx="5"/>
  <text x="505" y="435" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="white">Validation Error</text>
  <text x="505" y="455" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">ValidationException</text>
  <text x="505" y="470" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">thrown</text>
  
  <line x1="380" y1="450" x2="430" y2="445" stroke="#E74C3C" stroke-width="2" marker-end="url(#arrowred)"/>
  
  <rect x="630" y="420" width="150" height="50" fill="#95A5A6" stroke="#7F8C8D" stroke-width="2" rx="5"/>
  <text x="705" y="440" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="white">Write Error</text>
  <text x="705" y="458" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">to output file</text>
  
  <line x1="580" y1="445" x2="630" y2="445" stroke="#E74C3C" stroke-width="2" marker-end="url(#arrowred)"/>
  
  <rect x="610" y="520" width="190" height="60" fill="#ECF0F1" stroke="#95A5A6" stroke-width="2" rx="5"/>
  <text x="705" y="545" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#34495E">recommendations.txt</text>
  <text x="705" y="565" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#7F8C8D">(Output - Error message)</text>
  
  <line x1="705" y1="470" x2="705" y2="520" stroke="#E74C3C" stroke-width="2" marker-end="url(#arrowred)"/>
  
  <rect x="50" y="620" width="800" height="60" fill="#F8F9FA" stroke="#DEE2E6" stroke-width="1" rx="5"/>
  <text x="60" y="640" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">Key Points:</text>
  <text x="60" y="660" font-family="Arial, sans-serif" font-size="11" fill="#555">Validation happens during parsing (fail-fast) - First error stops processing - All data in memory</text>
  <text x="60" y="675" font-family="Arial, sans-serif" font-size="11" fill="#555">Success: Full recommendations written - Error: Only error message written</text>
</svg>
